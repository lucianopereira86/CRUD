(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"6NsE":function(t,i,s){"use strict";var e=s("d72S"),o=s.n(e);o.a},HIMr:function(t,i,s){},JS4Q:function(t,i,s){},"VH0+":function(t,i,s){"use strict";var e=s("JS4Q"),o=s.n(e);o.a},d72S:function(t,i,s){},fIgX:function(t,i,s){"use strict";var e=s("jBb7"),o=s.n(e);o.a},fUuA:function(t,i,s){"use strict";var e=s("HIMr"),o=s.n(e);o.a},jBb7:function(t,i,s){},zVWI:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("q-page",{staticClass:"q-pa-sm bg-black",attrs:{padding:""}},[t.isDisponivel?s("q-tabs",{model:{value:t.aba,callback:function(i){t.aba=i},expression:"aba"}},[s("q-tab",{staticStyle:{width:"50%"},attrs:{slot:"title",name:"pendentes",label:"PENDENTES",count:t.qtdPendentes},on:{click:function(i){t.clickAba(0)}},slot:"title"}),s("q-tab",{staticStyle:{width:"50%"},attrs:{slot:"title",name:"aceitos",label:"ACEITOS",count:t.qtdAceitos},on:{click:function(i){t.clickAba(1)}},slot:"title"})],1):t._e(),t.isDisponivel?s("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.horizontal",value:t.mudarAba,expression:"mudarAba",modifiers:{horizontal:!0}}],staticClass:"row flex-center"},[t.loadingSearch?s("div",{staticClass:"text-center full-width paddingTop q-mt-lg"},[s("q-icon",{staticClass:"text-faded fas fa-sync-alt fa-spin-fix fa-spin sub_icon q-mt-xl",attrs:{size:"1.5em"}}),s("div",{staticClass:"q-mt-lg"},[s("span",{staticClass:"text-title text-light"},[t._v("PROCURANDO CONVITES...")])])],1):t._e(),0!=t.aba_id||t.loadingSearch?t._e():s("convites-pendentes-aceitos",{staticClass:"full-width",attrs:{parent:t.this_parent,convites:t.convitesPendentes}}),1!=t.aba_id||t.loadingSearch?t._e():s("convites-pendentes-aceitos",{staticClass:"full-width",attrs:{parent:t.this_parent,convites:t.convitesAceitos}}),s("div",{staticClass:"fixed-bottom full-width bg-black relative-position"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-btn",{staticClass:"full-width",attrs:{flat:"",label:"Ficar Off-line",color:"negative",loading:t.loadingStatus,disable:t.loadingStatus},on:{click:function(i){t.alterarStatus()}}})],1),s("div",{staticClass:"col"},[s("q-btn",{staticClass:"full-width",attrs:{label:"Pesquisar",color:"pink",loading:t.loadingSearch,disable:t.loadingSearch},on:{click:function(i){t.pesquisar()}}})],1)])])],1):s("div",[s("div",{staticClass:"absolute-center full-width text-center"},[s("div",{staticClass:"text-white q-mb-xl"},[s("span",[t._v("VOCÊ ESTÁ OFF-LINE")])]),s("div",[s("q-btn",{attrs:{label:"Ficar On-line",color:"positive",loading:t.loadingStatus,disable:t.loadingStatus},on:{click:function(i){t.alterarStatus()}}})],1)])])],1)},o=[];e._withStripped=!0;s("rGqo");var a=s("MVZn"),n=s.n(a),c=(s("Ezub"),s("+diE"),s("L2JU")),l=s("m3Cd"),r=function(){var t=this,i=t.$createElement,s=t._self._c||i;return t.show?s("q-page-container",[s("q-modal",{model:{value:t.showModal,callback:function(i){t.showModal=i},expression:"showModal"}},[s("modal-toolbar",{ref:"toolbarRef",attrs:{title:t.title,parent:t.this_parent}}),s("modal-detalhes",{ref:"detalhesRef",staticClass:"page-margin-top",attrs:{parent:t.this_parent}}),s("modal-config",{ref:"configRef",attrs:{parent:t.this_parent}})],1),s("div",{staticClass:"fixed-top-right q-ma-md countHeader"},[s("div",{staticClass:"row text-white"},[s("div",{staticClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-right"},[s("q-icon",{staticClass:"q-pb-xs",attrs:{name:"location_on",size:"1.2em"}}),s("span",{staticClass:"q-subheading q-pl-xs"},[t._v(t._s(t.qtdAtivos))])],1),s("div",{staticClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-right"},[s("q-icon",{attrs:{name:"location_off",size:"1.2em"}}),s("span",{staticClass:"q-subheading q-pl-xs vertical-bottom"},[t._v(t._s(t.qtdInativos))])],1)])]),s("div",{staticClass:"row"},t._l(t.companhias,function(i){return s("div",{key:i.companhia_id,staticClass:"relative-position col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 listCompanhias"},[s("div",{directives:[{name:"ripple",rawName:"v-ripple"}],on:{click:function(s){t.selecionar(i)}}},[s("v-lazy-image",{staticClass:"center-cropped-modal-companhias",attrs:{src:t.getSrc(i)}}),s("div",{staticClass:"cardCompanhia absolute-bottom relative-position full-width text-white q-ma-xs"},[s("div",{staticClass:"absolute-center items-center full-width q-pa-sm"},[s("div",{staticClass:"q-subheadline"},[s("span",{staticClass:"q-caption"},[t._v(t._s(i.usuario))]),s("q-btn",{staticClass:"float-right q-mt-sm",class:t.getClass(i),attrs:{round:"",size:"5px",dense:""}})],1),s("div",{staticClass:"full-width q-pb-xs"},[s("span",{staticClass:"q-caption"},[t._v(t._s(i.idade)+" Anos")])])]),s("div",{staticClass:"absolute-center items-center full-width  q-mt-xs q-pr-sm"},[s("div",{staticClass:"row q-pt-sm"},[s("div",{staticClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 offset-6 text-right"},[s("span",{staticClass:"q-caption"},[t._v(t._s(t.getDistancia(i))+" Km")])])])])])],1)])})),s("q-page-sticky",{attrs:{position:"bottom-right",offset:[20,20]}},[s("q-btn",{attrs:{round:"",color:"primary",icon:"fas fa-cog",size:"1em"},on:{click:t.verConfig}})],1)],1):t._e()},d=[];r._withStripped=!0;var h=s("lSNA"),u=s.n(h),f=(s("dRSK"),s("jcJ4")),p=s.n(f),v=s("pGFw"),m=s("ACRJ"),g={components:{VLazyImage:p.a,ModalToolbar:l["a"],ModalDetalhes:v["a"],ModalConfig:m["a"]},props:{parent:{type:Object}},data:function(){return{srcList:[],show:!1,qtdAtivos:0,qtdInativos:0,showModal:!1,title:"",this_parent:this}},computed:n()({},Object(c["e"])("geral",["toolbar","companhias"])),methods:n()({},Object(c["d"])("geral",["SET_TOOLBAR","SET_COMPANHIA"]),Object(c["b"])("config",["conexao"]),u()({mostrar:function(){var t=this;this.show=!0,this.qtdAtivos=0,this.qtdInativos=0,this.companhias.forEach(function(i){i.is_disponivel?t.qtdAtivos++:t.qtdInativos++,t.srcList.push({companhia_id:i.companhia_id,foto:""}),t.buscarImg(i)})},fechar:function(){this.show=!1},fecharModal:function(){this.$refs.toolbarRef.close()},getClass:function(t){return t.is_disponivel?"bgGreen":"bgRed"},getDistancia:function(t){return parseFloat(t.distancia/1e3).toFixed(1)},getSrc:function(t){var i=this.srcList.find(function(i){return i.companhia_id===t.companhia_id});return i?i.foto:""},setSrc:function(t,i){this.srcList.map(function(s){return s.companhia_id===t.companhia_id&&(s.foto=i,t.foto=i),s})},buscarImg:function(t){var i=this;this.conexao({ctx:this,method:"get",url:"/v1/geral/arquivo",params:{url:t.foto_url},sucesso:function(s){var e=s.data.base64;if(e){var o="data:image/jpg;base64,"+e;i.setSrc(t,o)}}})},selecionar:function(t){console.log("companhia",t),t.foto&&(t.foto=this.srcList.find(function(i){return i.companhia_id===t.companhia_id}).foto,this.showModal=!0,this.title="DETALHES",this.toolbar.ref=this.$refs.detalhesRef,this.SET_TOOLBAR(this.toolbar),this.toolbar.ref.mostrar(t))},verConfig:function(){this.showModal=!0,this.title="CONFIGURAÇÃO",this.toolbar.ref=this.$refs.configRef,this.SET_TOOLBAR(this.toolbar),this.toolbar.ref.mostrar()}},"fechar",function(){this.showModal=!1}))},b=g,_=(s("fUuA"),s("KHd+")),C=Object(_["a"])(b,r,d,!1,null,null,null),q=C.exports,x=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("q-page-container",{staticClass:"q-mt-xl",staticStyle:{padding:"0"}},[s("q-modal",{model:{value:t.showModal,callback:function(i){t.showModal=i},expression:"showModal"}},[s("modal-toolbar",{ref:"toolbarRef",attrs:{title:t.title,parent:t.this_parent}}),s("modal-detalhes-cliente",{ref:"detalhesClienteRef",attrs:{parent:t.this_parent}})],1),0==t.convites.length?s("div",{staticClass:"text-center full-width absolute-center"},[s("span",{staticClass:"text-title text-light"},[t._v("NENHUM CONVITE ENCONTRADO")])]):t._e(),s("div",{staticClass:"row q-mt-lg q-pb-sm"},t._l(t.convites,function(i,e){return s("div",{key:e,staticClass:"relative-position col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},[s("div",{directives:[{name:"ripple",rawName:"v-ripple"}],on:{click:function(s){t.selecionar(i)}}},[i.cliente.foto_url?s("v-lazy-image",{staticClass:"center-cropped-modal-convites",attrs:{src:t.getSrc(i.cliente)}}):s("q-icon",{staticClass:"center-cropped-modal-convites",attrs:{name:"person",color:"pink",size:"6em"}}),s("div",{staticClass:"cardCliente absolute-bottom relative-position full-width text-white q-ma-xs"},[s("div",{staticClass:"absolute-center items-center full-width q-pa-sm"},[s("div",{staticClass:"q-subheadline"},[s("span",{staticClass:"q-caption"},[t._v(t._s(i.cliente.usuario))])]),s("div",{staticClass:"full-width q-pb-xs"},[s("span",{staticClass:"q-caption"},[t._v(t._s(i.cliente.idade)+" Anos")])])]),s("div",{staticClass:"absolute-center items-center full-width  q-mt-xs q-pr-sm"},[s("div",{staticClass:"row q-pt-sm"},[s("div",{staticClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 offset-6 text-right"},[s("span",{staticClass:"q-caption"},[t._v(t._s(t.getDistancia(i.cliente))+" Km")])])])])])],1)])}))],1)},w=[];x._withStripped=!0;var S=function(){var t=this,i=t.$createElement,s=t._self._c||i;return t.show?s("q-page-container",{staticClass:"bg-black text-white full-width",staticStyle:{padding:"0"}},[s("div",{staticClass:"row flex-center",staticStyle:{height:"100vh"}},[s("div",{staticClass:"full-width full-height relative-position"},[t.cliente.foto?s("img",{staticClass:"center-cropped-modal-perfil",attrs:{id:"imgPerfil",src:t.cliente.foto}}):s("q-icon",{staticClass:"absolute-center bg-dark q-pa-lg round",attrs:{name:"person",color:"pink",size:"6em"}}),s("div",{staticClass:"dadosCliente bottom relative-position full-width text-white"},[s("div",{staticClass:"absolute-top text-center q-pa-xs q-mt-lg"},[s("span",{staticClass:"q-headline text-weight-light q-mt-xl absolute-center"},[t._v(t._s(t.cliente.usuario))])]),s("div",{staticClass:"absolute-left full-width q-pl-md",staticStyle:{top:"75%"}},[s("div",[s("span",[t._v(t._s(t.cliente.idade)+" Anos")])]),s("div",{staticClass:"q-mt-sm inline-block"},[s("q-icon",{staticClass:"q-mr-sm",attrs:{name:"location_on",size:"1em"}}),s("span",[t._v(t._s(t.getDistancia(t.cliente))+" Km")])],1),s("div",{staticClass:"float-right inline-block q-mt-sm q-mr-md"},[s("div",{staticClass:"atividade q-mr-sm bg-light-green-6"}),s("span",[t._v(t._s(t.getTempoPosicao(t.cliente)))])])])])],1),s("div",{staticClass:"fixed-bottom row q-mb-sm"},[s("div",{staticClass:"col relative-position"},[s("q-btn",{staticClass:"absolute-center",attrs:{outline:"",dense:"",round:"",color:"white",size:"1em"},on:{click:function(i){t.cancelar()}}},[s("q-icon",{attrs:{name:"delete",size:"1.5em"}})],1)],1),s("div",{staticClass:"col text-center"},[s("q-btn",{class:2===t.sit_encontro_id?"heart":"",attrs:{flat:"",dense:"",round:"",color:"pink",disable:2===t.sit_encontro_id,size:"1.5em"},on:{click:function(i){t.aceitar()}}},[s("q-icon",{staticClass:"q-mt-xs",attrs:{name:2===t.sit_encontro_id?"favorite":"favorite_border",size:"1.5em"}})],1)],1)])])]):t._e()},O=[];S._withStripped=!0;var A=s("wd/R"),E=s.n(A),T=s("oNfb"),N=2,k=4,M={props:{parent:{type:Object}},data:function(){return{show:!1,cliente:{},encontro:{}}},computed:n()({},Object(c["e"])("geral",["sit_encontro_id"])),watch:{sit_encontro_id:function(){console.log("ModalDetalhesCliente -> sit_encontro_id",this.sit_encontro_id),3===this.sit_encontro_id&&(this.fechar(),this.parent.fecharModal())}},methods:n()({},Object(c["b"])("config",["conexao"]),Object(c["d"])("geral",["SET_GETENCONTROS","SET_SITUACAO_ENCONTRO"]),{mostrar:function(t){console.log("encontro",t),this.SET_SITUACAO_ENCONTRO(t.sit_encontro_id),this.cliente=t.cliente,this.encontro=t,this.show=!0},fechar:function(){this.show=!1},getDistancia:function(t){return parseFloat(t.distancia/1e3).toFixed(1)},getTempoPosicao:function(t){var i="",s=E()(),e=s.diff(t.cliente_posicao.data_hora,"minutes");if(console.log("time",e),e>60){var o=Math.floor(e/60);console.log("horas",o);var a=e%60;console.log("minutes",a),i=o+"h "+a+" min atrás"}else i=e+" min atrás";return i},cancelar:function(){var t=this;this.$q.dialog({title:"AVISO",message:"Deseja CANCELAR o convite?",ok:"Sim",cancel:"Não"}).then(function(){t.$q.loading.show({message:"Aguarde..."}),t.conexao({url:"/v1/companhia/convite",form:{encontro_id:t.encontro.encontro_id,sit_encontro_id:k},sucesso:function(i){t.$q.loading.hide(),T["a"].mostrar("Convite cancelado com sucesso!","positive"),t.fechar(),t.SET_GETENCONTROS(!0)},erro:function(){t.$q.loading.hide()}})}).catch(function(){})},aceitar:function(){var t=this;this.$q.dialog({title:"AVISO",message:"Deseja ACEITAR o convite?",ok:"Sim",cancel:"Não"}).then(function(){t.$q.loading.show({message:"Aguarde..."}),t.conexao({url:"/v1/companhia/convite",form:{encontro_id:t.encontro.encontro_id,sit_encontro_id:N},sucesso:function(i){t.SET_SITUACAO_ENCONTRO(N),t.$q.loading.hide(),T["a"].mostrar("Convite aceito com sucesso!","positive")},erro:function(){t.$q.loading.hide()}})}).catch(function(){})}})},R=M,I=(s("fIgX"),Object(_["a"])(R,S,O,!1,null,null,null)),j=I.exports,D={components:{VLazyImage:p.a,ModalToolbar:l["a"],ModalDetalhesCliente:j},props:{convites:{type:Object}},data:function(){return{srcList:[],showModal:!1,title:"",this_parent:this}},computed:n()({},Object(c["e"])("geral",["toolbar"])),mounted:function(){var t=this;console.log("convites",this.convites),this.convites.map(function(i){t.srcList.push({cliente_id:i.cliente.cliente_id,foto:""}),t.buscarImg(i.cliente)})},methods:n()({},Object(c["d"])("geral",["SET_TOOLBAR"]),Object(c["b"])("config",["conexao"]),{fecharModal:function(){this.showModal=!1},getDistancia:function(t){return parseFloat(t.distancia/1e3).toFixed(1)},getSrc:function(t){var i=this.srcList.find(function(i){return i.cliente_id===t.cliente_id});return i?i.foto:""},setSrc:function(t,i){t.foto=i,this.srcList.map(function(s){s.cliente_id===t.cliente_id&&(s.foto=i)})},buscarImg:function(t){var i=this;t.foto_url&&this.conexao({ctx:this,method:"get",url:"/v1/geral/arquivo",params:{url:t.foto_url},sucesso:function(s){var e=s.data.base64;if(e){var o="data:image/jpg;base64,"+e;i.setSrc(t,o)}}})},selecionar:function(t){console.log("encontro",t),this.verModal("DETALHES","detalhesClienteRef",t)},verModal:function(t,i,s){this.showModal=!0,this.title=t,console.log("this.$refs",this.$refs),this.toolbar.ref=this.$refs[i],this.SET_TOOLBAR(this.toolbar),this.toolbar.ref.mostrar(s)}})},P=D,z=(s("VH0+"),Object(_["a"])(P,x,w,!1,null,null,null)),L=z.exports,$={components:{ModalToolbar:l["a"],ModalCompanhias:q,ConvitesPendentesAceitos:L},data:function(){return{this_parent:this,isDisponivel:!1,icon:"",label:"",color:"",loadingStatus:!1,loadingSearch:!1,aba_id:0,abas:["pendentes","aceitos"],aba:"pendentes",qtdPendentes:0,qtdAceitos:0,convitesPendentes:[],convitesAceitos:[]}},watch:{getEncontros:function(){console.log("Convites -> getEncontros",this.getEncontros),this.getEncontros&&(this.SET_GETENCONTROS(!1),this.pesquisar())}},computed:n()({},Object(c["e"])("geral",["getEncontros"])),mounted:function(){var t=this.$q.localStorage.get.item("usuario");this.isDisponivel=t.is_disponivel,this.isDisponivel&&(this.enviarPosicao(),this.pesquisar())},methods:n()({},Object(c["b"])("config",["conexao"]),Object(c["b"])("geral",["sendPosition"]),Object(c["d"])("geral",["SET_GETENCONTROS"]),{clickAba:function(t){this.aba=this.abas[t],this.aba_id=t},mudarAba:function(t){var i=t.direction;t.duration,t.distance,t.evt;"left"==i?0==this.aba_id&&this.aba_id++:1==this.aba_id&&this.aba_id--,this.aba=this.abas[this.aba_id]},countEncontros:function(t){var i=t?1:2,s=this.encontros.filter(function(t){return t.sit_encontro_id===i});return t?this.convitesPendentes=s.filter(function(t){return t.cliente}):this.convitesAceitos=s,s.length},alterarStatus:function(){var t=this;this.loadingStatus=!0;var i=!this.isDisponivel;this.conexao({ctx:this,url:"/v1/companhia/disponivel",form:{is_disponivel:i},sucesso:function(s){console.log("isDisponivel",i),t.loadingStatus=!1,t.isDisponivel=i},erro:function(){t.loadingStatus=!1}})},enviarPosicao:function(){this.sendPosition({ctx:this});var t=this;setInterval(function(){t.$q.localStorage.get.item("token")&&t.isDisponivel&&this.sendPosition({ctx:t})}.bind(this),3e4)},pesquisar:function(){this.qtdPendentes=0,this.qtdAceitos=0,this.convitesPendentes=[],this.convitesAceitos=[],this.loadingSearch=!0;var t=this;navigator.geolocation.getCurrentPosition(function(i){var s=i.coords.latitude,e=i.coords.longitude;t.conexao({ctx:t,method:"get",url:"/v1/companhia/encontros",params:{latitude:s,longitude:e},sucesso:function(i){var s=i.data;if(console.log("encontros",s),s){s.forEach(function(i){1==i.sit_encontro_id&&(t.convitesPendentes.push(i),t.qtdPendentes++),2==i.sit_encontro_id&&(t.convitesAceitos.push(i),t.qtdAceitos++)});var e=t.qtdAceitos>0?1:0;t.clickAba(e)}t.loadingSearch=!1},erro:function(){t.loadingSearch=!1}})},function(i){console.error("error geolocalization",i),T["a"].mostrar("Não foi possível obter sua geolocalização"),t.loadingSearch=!1},{enableHighAccuracy:!0,timeout:5e3})}})},y=$,F=(s("6NsE"),Object(_["a"])(y,e,o,!1,null,null,null));i["default"]=F.exports}}]);