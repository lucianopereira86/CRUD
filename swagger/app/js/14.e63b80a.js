(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{B6om:function(t,i,a){"use strict";var s=a("YI5j"),e=a.n(s);e.a},YI5j:function(t,i,a){},lNd9:function(t,i,a){"use strict";a.r(i);var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("q-page",{staticClass:"q-pa-sm bg-black",attrs:{padding:""}},[a("q-modal",{model:{value:t.showModal,callback:function(i){t.showModal=i},expression:"showModal"}},[a("modal-toolbar",{ref:"toolbarRef",attrs:{title:t.title,parent:t.this_parent}}),a("modal-detalhes",{ref:"detalhesRef",staticClass:"page-margin-top",attrs:{parent:t.this_parent}}),a("modal-config",{ref:"configRef",staticClass:"bg-black full-width full-height q-pa-sm",attrs:{parent:t.this_parent}})],1),a("q-page-container",{staticStyle:{"padding-top":"0px"}},[0!=t.companhiasVisiveis.length||t.loading?t._e():a("div",{staticClass:"text-center full-width absolute-center"},[a("span",{staticClass:"text-title text-light"},[t._v("NENHUMA COMPANHIA ENCONTRADA")])]),t.loading?a("div",{staticClass:"text-center full-width paddingTop q-mt-lg"},[a("q-icon",{staticClass:"text-faded fas fa-sync-alt fa-spin-fix fa-spin sub_icon q-mt-xl",attrs:{size:"1.5em"}}),a("div",{staticClass:"q-mt-lg"},[a("span",{staticClass:"text-title text-light"},[t._v("PROCURANDO COMPANHIAS...")])])],1):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.lastPage>0,expression:"lastPage > 0"}],staticClass:"fixed-top full-width bg-black q-pt-xl q-mt-md q-pb-xs text-white text-center",staticStyle:{"z-index":"1"}},[a("q-icon",{staticClass:"colorGreen",attrs:{name:"location_on",size:"1.2em"}}),a("span",{staticClass:"q-subheading q-ml-xs"},[t._v(t._s(t.qtdAtivos))]),a("q-icon",{staticClass:"q-ml-xs",attrs:{name:"location_off",size:"1.2em"}}),a("span",{staticClass:"q-subheading q-ml-xs"},[t._v(t._s(t.qtdInativos))])],1),t.companhiasVisiveis.length>0?a("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.horizontal",value:t.mudarAba,expression:"mudarAba",modifiers:{horizontal:!0}}],staticClass:"row q-mt-lg q-pb-sm"},t._l(t.companhiasVisiveis,function(i,s){return a("div",{key:s,staticClass:"relative-position col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 listCompanhias"},[i.hide?t._e():a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],on:{click:function(a){t.selecionar(i)}}},[a("v-lazy-image",{staticClass:"center-cropped-modal-companhias",attrs:{src:t.getSrc(i)}}),a("div",{staticClass:"cardCompanhia absolute-bottom relative-position full-width text-white q-ma-xs"},[a("div",{staticClass:"absolute-center items-center full-width q-pa-sm"},[a("div",{staticClass:"q-subheadline"},[a("span",{staticClass:"q-caption"},[t._v(t._s(i.usuario))]),a("q-btn",{staticClass:"float-right q-mt-xs",class:t.getClass(i),attrs:{round:"",size:"5px",dense:""}})],1),a("div",{staticClass:"full-width q-pb-xs"},[a("span",{staticClass:"q-caption"},[t._v(t._s(i.idade)+" Anos")])])]),a("div",{staticClass:"absolute-center items-center full-width  q-mt-xs q-pr-sm"},[a("div",{staticClass:"row q-pt-sm"},[a("div",{staticClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 offset-6 text-right"},[a("span",{staticClass:"q-caption"},[t._v(t._s(t.getDistancia(i))+" Km")])])])])])],1)])})):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.lastPage>0,expression:"lastPage > 0"}],staticClass:"fixed-bottom full-width bg-black q-mb-xl relative-position"},[a("div",{staticClass:"absolute-center text-light q-mt-lg"},[t._v(t._s(t.min+1)+" - "+t._s(t.max)+" de "+t._s(t.companhiasVisiveis.length))]),a("q-btn",{staticClass:"absolute-right q-mr-sm q-mt-xs",attrs:{round:"",dense:"",color:"pink"},on:{click:function(i){t.pesquisar()}}},[a("q-icon",{attrs:{name:"search"}})],1)],1)])],1)},e=[];s._withStripped=!0;a("rGqo"),a("dRSK");var o=a("MVZn"),n=a.n(o),l=a("jcJ4"),c=a.n(l),r=a("L2JU"),h=a("m3Cd"),d=a("pGFw"),m=a("ACRJ"),p=a("oNfb"),u={components:{VLazyImage:c.a,ModalToolbar:h["a"],ModalDetalhes:d["a"],ModalConfig:m["a"]},props:{parent:{type:Object}},data:function(){return{srcList:[],showModal:!1,title:"",this_parent:this,loading:!1,semConfig:!1,companhiasVisiveis:[],page:1,lastPage:0,min:0,max:0,qtdAtivos:0,qtdInativos:0}},computed:n()({},Object(r["e"])("geral",["toolbar","sit_encontro_id"])),watch:{sit_encontro_id:function(){console.log("Pesquisar -> sit_encontro_id",this.sit_encontro_id),2===this.sit_encontro_id&&this.pesquisar()}},mounted:function(){var t=this.$q.localStorage.get.item("config");t?(this.pesquisar(),this.enviarPosicao()):this.verConfig()},methods:n()({},Object(r["d"])("geral",["SET_TOOLBAR"]),Object(r["b"])("config",["conexao"]),Object(r["b"])("geral",["sendPosition"]),{mudarAba:function(t){var i=t.direction;t.duration,t.distance,t.evt;"left"==i?this.page<this.lastPage&&this.page++:this.page>1&&this.page--,this.carregarCompanhias()},fecharModal:function(){this.showModal=!1},getClass:function(t){return t.is_disponivel?"bgGreen":"bgRed"},getDistancia:function(t){return parseFloat(t.distancia/1e3).toFixed(1)},getSrc:function(t){var i=this.srcList.find(function(i){return i.companhia_id===t.companhia_id});return i?i.foto:""},setSrc:function(t,i){t.foto=i,this.srcList.map(function(a){a.companhia_id===t.companhia_id&&(a.foto=i)})},buscarImg:function(t){var i=this;this.conexao({ctx:this,method:"get",url:"/v1/geral/arquivo",params:{url:t.foto_url},sucesso:function(a){var s=a.data.base64;if(s){var e="data:image/jpg;base64,"+s;i.setSrc(t,e)}}})},selecionar:function(t){console.log("companhia",t),t.foto&&(t.foto=this.srcList.find(function(i){return i.companhia_id===t.companhia_id}).foto,this.verModal("DETALHES","detalhesRef",t))},verConfig:function(){this.verModal("CONFIGURAÇÃO","configRef")},verModal:function(t,i,a){this.showModal=!0,this.title=t,console.log("this.$refs",this.$refs),this.toolbar.ref=this.$refs[i],this.SET_TOOLBAR(this.toolbar),this.toolbar.ref.mostrar(a)},pesquisar:function(){var t=this.$q.localStorage.get.item("config");if(t){this.semConfig=!1;var i={idade:t.idade.min,peso:t.peso.min,altura:t.altura.min,valor:t.valor.min},a={idade:t.idade.max,peso:t.peso.max,altura:t.altura.max,valor:t.valor.max},s={homem:t.homem,mulher:t.mulher,min:i,max:a,raio:t.raio};this.companhiasVisiveis=[],this.lastPage=0,this.loading=!0;var e=this;this.qtdAtivos=0,this.qtdInativos=0,navigator.geolocation.getCurrentPosition(function(t){s.latitude=t.coords.latitude,s.longitude=t.coords.longitude,e.conexao({ctx:e,url:"/v1/cliente/companhias",form:s,sucesso:function(t){e.loading=!1;var i=t.data;console.log("companhias",i),0!=i.length?(i.forEach(function(t){t.is_disponivel?e.qtdAtivos++:e.qtdInativos++}),e.loading=!1,e.lastPage=Math.ceil(i.length/6),e.companhiasVisiveis=e.$_.cloneDeep(i),e.carregarCompanhias()):p["a"].mostrar("Nenhuma companhia encontrada")},erro:function(){e.loading=!1}})},function(t){console.error("error geolocalization",t),p["a"].mostrar("Não foi possível obter sua geolocalização"),e.loading=!1},{enableHighAccuracy:!0,timeout:5e3})}else this.semConfig=!0},carregarCompanhias:function(){this.min=6*(this.page-1),console.log("min",this.min),this.max=this.min+6,console.log("max 1",this.max),this.max=this.max>this.companhiasVisiveis.length?this.companhiasVisiveis.length:this.max,console.log("max 2",this.max);for(var t=0;t<this.companhiasVisiveis.length;t++){var i=this.companhiasVisiveis[t];t>=this.min&&t<this.max?(i.hide=!1,i.foto||(this.srcList.push({companhia_id:i.companhia_id,foto:""}),this.buscarImg(i))):i.hide=!0}},enviarPosicao:function(){this.sendPosition({ctx:this});var t=this;setInterval(function(){t.$q.localStorage.get.item("token")&&this.sendPosition({ctx:t})}.bind(this),3e4)}})},g=u,f=(a("B6om"),a("KHd+")),v=Object(f["a"])(g,s,e,!1,null,null,null);i["default"]=v.exports}}]);